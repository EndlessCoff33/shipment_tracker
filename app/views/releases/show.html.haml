- title "Releases for #{@app_name}"

%h2 Pending

%table.table.table-condensed
  %thead
    %tr
      %th{width: '10%'} version
      %th{width: '35%'} message
      %th{width: '15%'} feature reviews
      %th{width: '40%'} committed to master
  %tbody
  - @pending_releases.each do |release|
    %tr.pending-release{class: ('danger' unless release.approved?)}
      %td.monospace= short_sha(release.version)
      %td= release.subject
      %td
        - release.feature_reviews.each do |feature_review|
          %div= feature_review_link(feature_review)
      %td= release.committed_to_master_at.try(:to_formatted_s, :long_ordinal)

%h2 Deployed

%table.table.table-condensed
  %thead
    %tr
      %th{width: '10%'} version
      %th{width: '35%'} message
      %th{width: '15%'} feature reviews
      %th{width: '20%'} committed to master
      %th{width: '20%'} last deployed at
  %tbody
  - @deployed_releases.each do |release|
    %tr.deployed-release{class: ('danger' unless release.approved?)}
      %td.monospace= short_sha(release.version)
      %td= release.subject
      %td
        - release.feature_reviews.each do |feature_review|
          %div= feature_review_link(feature_review)
      %td= release.committed_to_master_at.try(:to_formatted_s, :long_ordinal)
      %td= release.production_deploy_time.try(:to_formatted_s, :long_ordinal)
